<!-- === PROCESOS | Bootstrap de nube integrado (Firestore + workspace) === -->
<script>
(function () {
  var CFG_KEY   = 'FIREBASE_CFG_JSON';
  var WS_KEY    = 'WORKSPACE_ID';
  var LOCK_KEY  = 'CONFIG_LOCKED';
  var BOOT_FLAG = 'PROCESOS_BOOTSTRAPPED';

  // Tu firebaseConfig (SOLO JSON con llaves)
  var FIREBASE_CONFIG = {
    "apiKey": "AIzaSyD7k7IbzhXt0PXUP6YCy6ZAQGXQdIKRU_U",
    "authDomain": "proceso-84254.firebaseapp.com",
    "projectId": "proceso-84254",
    "storageBucket": "proceso-84254.firebasestorage.app",
    "messagingSenderId": "433589034329",
    "appId": "1:433589034329:web:ad5d60d662c8beed9e0048",
    "measurementId": "G-DTVJE8D3FG"
  };

  // Workspace por defecto
  var DEFAULT_WORKSPACE = "procesos";

  // Devuelve true si se modificó algo
  function seedIfNeeded() {
    var changed = false;
    try {
      var currentCfg = localStorage.getItem(CFG_KEY);
      var desiredCfg = JSON.stringify(FIREBASE_CONFIG);
      if (currentCfg !== desiredCfg) {
        localStorage.setItem(CFG_KEY, desiredCfg);
        changed = true;
      }
      if (localStorage.getItem(WS_KEY) !== DEFAULT_WORKSPACE) {
        localStorage.setItem(WS_KEY, DEFAULT_WORKSPACE);
        changed = true;
      }
      // Señal opcional para ocultar la UI de configuración si la app lo soporta
      localStorage.setItem(LOCK_KEY, "1");
    } catch (e) {
      console.warn("[PROCESOS] No se pudo inicializar configuración de nube:", e);
    }
    return changed;
  }

  var changed = seedIfNeeded();

  // Si la app ya cargó sin config, fuerza una sola recarga para que la coja
  if (changed && !sessionStorage.getItem(BOOT_FLAG)) {
    sessionStorage.setItem(BOOT_FLAG, "1");
    console.log("[PROCESOS] Config integrada aplicada. Recargando una vez para activar Firestore...");
    location.reload();
  } else {
    console.log("[PROCESOS] Config integrada OK → Firestore(workspace='%s')", DEFAULT_WORKSPACE);
  }
})();
</script>
<!-- === /PROCESOS | Fin bootstrap === -->

<!-- (Opcional) Ocultar controles de configuración si siguen visibles en tu build -->
<style>
  /* Ajusta los selectores si tu build usa otros nombres */
  .config-simulada, [data-role="config-pill"], .pill-config, .btn-config { display: none !important; }
</style>
